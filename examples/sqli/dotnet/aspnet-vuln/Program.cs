using Microsoft.AspNetCore.Builder;using Microsoft.EntityFrameworkCore;using Microsoft.Extensions.DependencyInjection;var builder = WebApplication.CreateBuilder(args);builder.Services.AddDbContext<AppDb>(o => o.UseSqlite("Data Source=:memory:"));var app = builder.Build();using (var scope = app.Services.CreateScope()){var db = scope.ServiceProvider.GetRequiredService<AppDb>();db.Database.OpenConnection();db.Database.EnsureCreated();db.Users.AddRange(new User { Name = "alice" }, new User { Name = "bob" });db.SaveChanges();}app.MapGet("/search", async (HttpRequest req, AppDb db) =>{var q = req.Query["name"].ToString();var sql = "SELECT * FROM Users WHERE Name LIKE '%" + q + "%'";var rows = await db.Users.FromSqlRaw(sql).ToListAsync();return Results.Json(rows);});app.Run();public class AppDb : DbContext{public AppDb(DbContextOptions<AppDb> o) : base(o) { }public DbSet<User> Users => Set<User>();}public class User { public int Id { get; set; } public string Name { get; set; } = ""; }